const y={},Y=(e,t)=>e===t,m={equals:Y};let Z=Q;const x={},b=1,N=2,G={owned:null,cleanups:null,context:null,owner:null};var c=null;let S=null,r=null,A=null,u=null,p=null,q=0;function _(e,t){const s=r,n=c,i=e.length===0?G:{owned:null,cleanups:null,context:null,owner:t||n};c=i,r=null;try{return I(()=>e(()=>M(i)),!0)}finally{r=s,c=n}}function le(e,t){t=t?Object.assign({},m,t):m;const s={value:e,observers:null,observerSlots:null,pending:x,comparator:t.equals||void 0},n=i=>(typeof i=="function"&&(i=i(s.pending!==x?s.pending:s.value)),D(s,i));return[V.bind(s),n]}function $(e,t,s){const n=L(e,t,!0,b);C(n)}function B(e,t,s){const n=L(e,t,!1,b);C(n)}function j(e,t,s){s=s?Object.assign({},m,s):m;const n=L(e,t,!0,0);return n.pending=x,n.observers=null,n.observerSlots=null,n.comparator=s.equals||void 0,C(n),V.bind(n)}function z(e){if(A)return e();let t;const s=A=[];try{t=e()}finally{A=null}return I(()=>{for(let n=0;n<s.length;n+=1){const i=s[n];if(i.pending!==x){const f=i.pending;i.pending=x,D(i,f)}}},!1),t}function U(e){let t,s=r;return r=null,t=e(),r=s,t}function oe(e){const t=Symbol("context");return{id:t,Provider:se(t),defaultValue:e}}function fe(e){let t;return(t=K(c,e.id))!==void 0?t:e.defaultValue}function k(e){const t=j(e);return j(()=>O(t()))}function V(){const e=S;if(this.sources&&(this.state||e)){const t=u;u=null,this.state===b||e?C(this):T(this),u=t}if(r){const t=this.observers?this.observers.length:0;r.sources?(r.sources.push(this),r.sourceSlots.push(t)):(r.sources=[this],r.sourceSlots=[t]),this.observers?(this.observers.push(r),this.observerSlots.push(r.sources.length-1)):(this.observers=[r],this.observerSlots=[r.sources.length-1])}return this.value}function D(e,t,s){if(e.comparator&&e.comparator(e.value,t))return t;if(A)return e.pending===x&&A.push(e),e.pending=t,t;let n=!1;return e.value=t,e.observers&&e.observers.length&&I(()=>{for(let i=0;i<e.observers.length;i+=1){const f=e.observers[i];n&&S.disposed.has(f),(n&&!f.tState||!n&&!f.state)&&(f.pure?u.push(f):p.push(f),f.observers&&W(f)),n||(f.state=b)}if(u.length>1e6)throw u=[],new Error},!1),t}function C(e){if(!e.fn)return;M(e);const t=c,s=r,n=q;r=c=e,ee(e,e.value,n),r=s,c=t}function ee(e,t,s){let n;try{n=e.fn(t)}catch(i){J(i)}(!e.updatedAt||e.updatedAt<=s)&&(e.observers&&e.observers.length?D(e,n):e.value=n,e.updatedAt=s)}function L(e,t,s,n=b,i){const f={fn:e,state:n,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:c,context:null,pure:s};return c===null||c!==G&&(c.owned?c.owned.push(f):c.owned=[f]),f}function H(e){const t=S;if(e.state===0||t)return;if(e.state===N||t)return T(e);if(e.suspense&&U(e.suspense.inFallback))return e.suspense.effects.push(e);const s=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<q);)(e.state||t)&&s.push(e);for(let n=s.length-1;n>=0;n--)if(e=s[n],e.state===b||t)C(e);else if(e.state===N||t){const i=u;u=null,T(e,s[0]),u=i}}function I(e,t){if(u)return e();let s=!1;t||(u=[]),p?s=!0:p=[],q++;try{return e()}catch(n){J(n)}finally{te(s)}}function te(e){u&&(Q(u),u=null),!e&&(p.length?z(()=>{Z(p),p=null}):p=null)}function Q(e){for(let t=0;t<e.length;t++)H(e[t])}function T(e,t){const s=S;e.state=0;for(let n=0;n<e.sources.length;n+=1){const i=e.sources[n];i.sources&&(i.state===b||s?i!==t&&H(i):(i.state===N||s)&&T(i,t))}}function W(e){const t=S;for(let s=0;s<e.observers.length;s+=1){const n=e.observers[s];(!n.state||t)&&(n.state=N,n.pure?u.push(n):p.push(n),n.observers&&W(n))}}function M(e){let t;if(e.sources)for(;e.sources.length;){const s=e.sources.pop(),n=e.sourceSlots.pop(),i=s.observers;if(i&&i.length){const f=i.pop(),l=s.observerSlots.pop();n<i.length&&(f.sourceSlots[l]=n,i[n]=f,s.observerSlots[n]=l)}}if(e.owned){for(t=0;t<e.owned.length;t++)M(e.owned[t]);e.owned=null}if(e.cleanups){for(t=0;t<e.cleanups.length;t++)e.cleanups[t]();e.cleanups=null}e.state=0,e.context=null}function J(e){throw e}function K(e,t){return e?e.context&&e.context[t]!==void 0?e.context[t]:K(e.owner,t):void 0}function O(e){if(typeof e=="function"&&!e.length)return O(e());if(Array.isArray(e)){const t=[];for(let s=0;s<e.length;s++){const n=O(e[s]);Array.isArray(n)?t.push.apply(t,n):t.push(n)}return t}return e}function se(e){return function(s){let n;return $(()=>n=U(()=>(c.context={[e]:s.value},k(()=>s.children)))),n}}function re(e,t){return U(()=>e(t))}function ne(e,t,s){let n=s.length,i=t.length,f=n,l=0,o=0,a=t[i-1].nextSibling,g=null;for(;l<i||o<f;){if(t[l]===s[o]){l++,o++;continue}for(;t[i-1]===s[f-1];)i--,f--;if(i===l){const h=f<n?o?s[o-1].nextSibling:s[f-o]:a;for(;o<f;)e.insertBefore(s[o++],h)}else if(f===o)for(;l<i;)(!g||!g.has(t[l]))&&t[l].remove(),l++;else if(t[l]===s[f-1]&&s[o]===t[i-1]){const h=t[--i].nextSibling;e.insertBefore(s[o++],t[l++].nextSibling),e.insertBefore(s[--f],h),t[i]=s[f]}else{if(!g){g=new Map;let d=o;for(;d<f;)g.set(s[d],d++)}const h=g.get(t[l]);if(h!=null)if(o<h&&h<f){let d=l,v=1,R;for(;++d<i&&d<f&&!((R=g.get(t[d]))==null||R!==h+v);)v++;if(v>h-o){const X=t[l];for(;o<h;)e.insertBefore(s[o++],X)}else e.replaceChild(s[o++],t[l++])}else l++;else t[l++].remove()}}}function ue(e,t,s){let n;return _(i=>{n=i,t===document?e():ie(t,e(),t.firstChild?null:void 0,s)}),()=>{n(),t.textContent=""}}function ce(e,t,s){const n=document.createElement("template");n.innerHTML=e;let i=n.content.firstChild;return s&&(i=i.firstChild),i}function he(e,t,s){s==null?e.removeAttribute(t):e.setAttribute(t,s)}function ie(e,t,s,n){if(s!==void 0&&!n&&(n=[]),typeof t!="function")return E(e,t,n,s);B(i=>E(e,t(),i,s),n)}function E(e,t,s,n,i){for(y.context&&!s&&(s=[...e.childNodes]);typeof s=="function";)s=s();if(t===s)return s;const f=typeof t,l=n!==void 0;if(e=l&&s[0]&&s[0].parentNode||e,f==="string"||f==="number"){if(y.context)return s;if(f==="number"&&(t=t.toString()),l){let o=s[0];o&&o.nodeType===3?o.data=t:o=document.createTextNode(t),s=w(e,s,n,o)}else s!==""&&typeof s=="string"?s=e.firstChild.data=t:s=e.textContent=t}else if(t==null||f==="boolean"){if(y.context)return s;s=w(e,s,n)}else{if(f==="function")return B(()=>{let o=t();for(;typeof o=="function";)o=o();s=E(e,o,s,n)}),()=>s;if(Array.isArray(t)){const o=[];if(P(o,t,i))return B(()=>s=E(e,o,s,n,!0)),()=>s;if(y.context){for(let a=0;a<o.length;a++)if(o[a].parentNode)return s=o}if(o.length===0){if(s=w(e,s,n),l)return s}else Array.isArray(s)?s.length===0?F(e,o,n):ne(e,s,o):(s&&w(e),F(e,o));s=o}else if(t instanceof Node){if(y.context&&t.parentNode)return s=l?[t]:t;if(Array.isArray(s)){if(l)return s=w(e,s,n,t);w(e,s,null,t)}else s==null||s===""||!e.firstChild?e.appendChild(t):e.replaceChild(t,e.firstChild);s=t}}return s}function P(e,t,s){let n=!1;for(let i=0,f=t.length;i<f;i++){let l=t[i],o;if(l instanceof Node)e.push(l);else if(!(l==null||l===!0||l===!1))if(Array.isArray(l))n=P(e,l)||n;else if((o=typeof l)=="string")e.push(document.createTextNode(l));else if(o==="function")if(s){for(;typeof l=="function";)l=l();n=P(e,Array.isArray(l)?l:[l])||n}else e.push(l),n=!0;else e.push(document.createTextNode(l.toString()))}return n}function F(e,t,s){for(let n=0,i=t.length;n<i;n++)e.insertBefore(t[n],s)}function w(e,t,s,n){if(s===void 0)return e.textContent="";const i=n||document.createTextNode("");if(t.length){let f=!1;for(let l=t.length-1;l>=0;l--){const o=t[l];if(i!==o){const a=o.parentNode===e;!f&&!l?a?e.replaceChild(i,o):e.insertBefore(i,s):a&&o.remove()}else f=!0}}else e.insertBefore(i,s);return[i]}export{le as a,re as b,B as c,oe as d,ie as i,ue as r,he as s,ce as t,fe as u};
